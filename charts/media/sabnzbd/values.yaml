cluster:
  top_level_domain: example.com
  name: openshift
  admin_email: admin@example.com
  timezone: America/New_York
  storage:
    #config:
    #  storageClassName: synology-iscsi
    media:
      nfs:
        server: nas
        path: /volume1/media

application:
  name: Sabnzbd
  group: Media
  icon: download-box
  iconColor: "orange"
  image: "https://raw.githubusercontent.com/sabnzbd/sabnzbd/develop/icons/logo-arrow.svg"
  description: "Efficient Usenet downloader"
  port: &port 8080
  location: 100

pods:
  main:
    image:
      repository: ghcr.io/home-operations/sabnzbd
      # renovate: datasource=docker depName=ghcr.io/home-operations/sabnzbd versioning=semver
      tag: 4.5.3
      pullPolicy: IfNotPresent
    env:
      SABNZBD__PORT: *port
      SABNZBD__HOST_WHITELIST_ENTRIES: >-
        sabnzbd,
        sabnzbd.sabnzbd,
        sabnzbd.sabnzbd.svc,
        sabnzbd.sabnzbd.svc.cluster,
        sabnzbd.sabnzbd.svc.cluster.local,
        sabnzbd.apps.{{ .Values.cluster.name }}.{{ .Values.cluster.top_level_domain }}
    probes:
      liveness: &probes
        enabled: true
        custom: true
        spec:
          httpGet:
            path: /api?mode=version
            port: *port
          initialDelaySeconds: 0
          periodSeconds: 10
          timeoutSeconds: 1
          failureThreshold: 3
      readiness: *probes
